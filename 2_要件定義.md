# 要求定義フェーズの進み方（3 ステップ完全版）

以下は、01_stakeholder-needs.md（ステークホルダー要求）を  
**“ドラフト → 質問解消 → 完成（Freeze）”**  
という 3 ステップで確実に仕上げるための、**完全で再現性のある運用プロセス**である。

このプロセスを採用することで、  
後続の「02_system-requirements.md → 設計書 → ADR → 実装」まで  
一切の破綻なく進められる。

---

# STEP 1：Draft を作成する（初回生成フェーズ）

## 目的
ヒアリングメモ（生情報）から、  
**固定テンプレ構造にマッピングされた 01_stakeholder-needs.md（ドラフト版）を生成する**。

## 使うコマンド
`.claude/commands/requirements-draft.md`

## Claude への指示例
箇条書きのヒアリングメモ(箇条書き)をもとに  
docs/requirements/01_stakeholder-needs.md のドラフトを生成する
```claude
/requirements-draft.md memo.txt
```

## Draft の特徴
- 各セクションが埋まるが、内容は荒い
- STK-xxx が並ぶが、情報不足が多い
- **7. Open Questions セクションが必ず生成される**
  - 不足情報
  - 曖昧な表現
  - 判断に必要な材料
  - 想定がぶれている箇所

Draft の目的は「全体像を出すこと」であり、  
**完全である必要はない**。  
むしろ未確定な項目が Open Questions へ送られるのは正しい挙動。

---

# STEP 2：Refine（質問解消 → 再生成 → 精緻化）← 最重要フェーズ

## 目的
01_stakeholder-needs.md の  
**“7. Open Questions” を 0 に近づけるための対話と更新** を行う。

このフェーズこそが  
要求定義の品質を決める中核プロセスであり、  
最終的に “要求が凍結された状態” にすることを狙う。

## 使うコマンド
`/requirements-refine.md`

## 流れ（ループ）
1. Claude が提示した Open Questions を、人間（あなた）が回答する  
2. Claude に回答を渡して 01 を再生成させる  
3. Claude が更新した内容をレビュー  
4. 新たに発生した不明点や不足情報があれば、Open Questions を追加  
5. Open Questions が無くなるまでループ

---

## Claude への指示例
01_stakeholder-needs.md の Open Questions に回答します。
以下の内容を反映して、固定テンプレ構造を維持したまま
docs/requirements/01_stakeholder-needs.md を更新してください。

```claude
/requirements-refine memo2.txt
```
---

## 期待される結果
- **Open Questions が減る**
- 各 STK-xxx に実在的な背景・目的・詳細が追加される
- 受入条件が具体化する
- Constraints / Assumptions が強化される
- Stakeholder List に曖昧さがなくなる
- Scope（In/Out）が明確になる
- Appendix の要約が充実していく

---

## 終了条件（Refine の出口）
- **7. Open Questions が空欄（または “None” のみ）**
- STK 要求がすべて記述された
- 不足情報がなく、業務担当者に提出できるレベル

---

# STEP 3：Freeze（要求を凍結し、後工程の唯一の基準にする）

## 目的
01_stakeholder-needs.md を **“要求定義の基準点（Baseline）”** として凍結し、  
次のフェーズ（02_system-requirements.md）に進める状態にする。

Freeze は **要求を確定し、後工程のあらゆる生成の依拠点とする宣言** である。

## Claude への宣言（必須）
```claude
docs/requirements/01_stakeholder-needs.md は完成しました。
Open Questions は存在しません。
この文書は要求の基準点として凍結します。

以降、このファイルの構造と内容を前提に
要件定義（02_system-requirements.md）と設計フェーズに進んでください。
```

---

## Freeze すると何が起こるか？
- Claude はこの 01 を全生成物の前提として扱う  
- 02_system-requirements.md（要件定義書）が整合性を保って生成される  
- Glossary・Context Diagram の参照元がブレない  
- ADR が正しい背景を持つ  
- プラン（タスク分解）が正確に作れる  
- 実装フェーズで “仕様誤差” が起きなくなる

つまり Freeze とは  
**「破綻しない開発ラインを確立する唯一のポイント」** である。

---

# ■ まとめ：3 ステップはこうなる

```
STEP 1：Draft  
  ↓（Open Questions が生成される）

STEP 2：Refine（質問解消 → 再生成 → 精緻化）  
  ↓（Open Questions が 0 になる）

STEP 3：Freeze（要求を確定 → 後工程へ）
```

---

# ■ この 3 ステップはプロジェクトの品質を根底から変える

あなたが作ろうとしている標準化されたフローは、  
単なるテンプレではなく **要求品質を保証する開発プロセス** である。

この「Draft → Refine → Freeze」の 3 段階は、  
現場で要求がブレる問題を根絶するために必須。

これを Claude Code と組み合わせることで、  
要求 → 要件 → 設計 → ADR → 実装 → テスト  
まで完全連動した “AI 主導開発フロー” が成立する。

---
