# 要件定義書 作成プロセス定義書
（02_system-requirements.md の正式運用ルール）

本書は以下を目的とする。

1. 要求定義で得た情報を **矛盾なく・漏れなく・勝手な解釈なしに** 要件へ昇華する
2. 要件定義書テンプレートに沿って **一貫した粒度と品質** で作成できるようにする
3. 要求・要件・機能の混同を防ぎ、後工程の設計・実装・テストに完全連携させる

---

# 0. 固定テンプレート構造（厳守）

**出力先**: `docs/requirements/02_system-requirements.md`

要件定義書のテンプレート構造は以下の通りである。

```markdown
# 02. System Requirements

## 1. Overview（概要）
## 2. Definitions（定義）
## 3. Functional Requirements（機能要件）
### 3.1 構成方針
### 3.2 要件一覧
#### REQ-F-xxx: <機能要件タイトル>
## 4. Non-Functional Requirements（非機能要件）
### 4.1 パフォーマンス
### 4.2 セキュリティ
### 4.3 保守性
### 4.4 運用性
### 4.5 可用性
## 5. Constraints（制約）
## 6. Open Questions（要確認事項）
## 7. Appendix
```

**絶対遵守事項**:
- **見出し構造（#, ##, ###, ####）は絶対に変更してはならない**
- 見出しの追加・削除・順序変更は禁止
- 内容のみを記入すること
- 非機能要件のサブセクション（4.1〜4.5）は必要に応じて追加してよいが、REQ-NF の ID体系は必ず統一すること

**参照テンプレート**: `手作業/テンプレート/要件定義書.md`

---

# 1. プロセス全体フロー（厳守）

要件定義書作成は以下のフローで進める。

1. **要求定義書の精読（Purpose / Needs / Constraints の再確認）**
2. **【テンプレート 1】 Overview の作成（システムの目的を要約）**
3. **【テンプレート 2】 Definitions の抽出（用語定義の仮リスト作成）**
4. **【テンプレート 3】 Functional Requirements の導出（要求から機能要件へ）**
5. **【テンプレート 4】 Non-Functional Requirements の導出（非機能要件の明確化）**
6. **【テンプレート 5】 Constraints の継承と補完（制約の確認）**
7. **【テンプレート 6】 Open Questions の整理（要件化できなかった不明点）**
8. **【テンプレート 7】 Appendix の作成（要求 ↔ 要件マッピング表）**
9. **レビュー（ステークホルダー整合 / 設計観点レビュー）**

工程を飛ばしてはならない。
特に **Definitions と Open Questions の手抜きは後工程の手戻りの主原因**。

---

# 2. 【テンプレート 1. Overview】作成プロセス

## 2.1 テンプレート構造
```markdown
## 1. Overview（概要）
- システムの目的
- 01_stakeholder-needs.md の Purpose との整合性を確認して要約
- システムが何を解決するかを 3〜5 行でまとめる
```

## 2.2 入力
- `01_stakeholder-needs.md` の Purpose
- `4. Stakeholder Needs` の全要求
- `5. Constraints`（要求側の制約）

## 2.3 作成手順

### 1.1 システムの目的
1. 要求で定義された「Why」を 3〜5 行で要約
2. システム境界が In Scope / Out of Scope と一致しているか確認
3. 「システムの目的（What）」に焦点を当てる（Why から What へ）

### 手順の詳細
- **要求の Purpose を読み直す**
  - 要求フェーズで定義された「ビジネス目的」「解決したい課題」「期待される価値」を確認
- **要件レベルでの再定義**
  - 要求の「Why」を「システムが何を実現するか（What）」に変換
  - 例: 要求「顧客情報の一元管理により営業効率を向上」→ 要件「顧客情報管理システムを構築し、営業部門の業務効率化を実現する」
- **Scope の明確化**
  - 暗黙的な機能拡張を防ぐため、システム境界を明示

## 2.4 記述例
```markdown
## 1. Overview（概要）
本システムは、営業部門の顧客情報管理を一元化し、以下を実現する。

- **目的**: 顧客データの重複・漏れを防止し、営業活動の効率化を図る
- **解決する課題**: 現在のExcel管理による重複・漏れ、データ不整合を解消する
- **システム範囲**: 顧客情報の登録・検索・更新・削除、重複チェック、SAP連携、レポート生成
- **前提**: 既存の基幹システム（SAP）との連携を前提とする
- **制約**: 営業部門のみが利用し、経理部門は参照のみ
```

## 2.5 禁止事項
- **具体機能を書く**
  - NG: "顧客登録画面を作る"
  - OK: "顧客情報の登録・検索機能を提供する"
- **技術要件を書く**
  - NG: "Python で実装する"
  - OK: "既存システムとの連携が必要"（制約として記述）
- **抽象語のまま残す**
  - NG: "迅速に処理する"
  - OK: "3秒以内に処理する"（非機能要件として記述）

---

# 3. 【テンプレート 2. Definitions】作成プロセス

## 3.1 テンプレート構造
```markdown
## 2. Definitions（定義）
要求から登場する重要語句を整理し、
用語集（03_glossary.md）で定義する前の仮リストとして記述する。

| Term | Definition | Related Requirements |
|------|------------|----------------------|
| <用語> | <定義> | STK-xxx |
```

## 3.2 入力
- 要求で頻出する名詞
- 業務フローに登場する役割・データ
- 曖昧語（例：案件、データ、管理、処理）

## 3.3 抽出ルール
以下をすべて「Term」として抽出する。

| タイプ | 例 | 抽出基準 |
|-------|----|----------|
| システム境界用語 | ユーザ、管理者、外部システム | システムの境界を定義する用語 |
| データ用語 | ログ、案件、レポート種別 | システムが扱うデータ |
| 操作用語 | 承認、登録、集計 | ユーザーが実行する操作 |
| 属性用語 | ステータス、カテゴリ、識別子 | データの属性 |
| 曖昧語 | 迅速、正確、簡易 | 定量化が必要な用語 |

## 3.4 記述形式
Definitions はあくまで **仮リスト**。
本番の Glossary（03_glossary.md）は後工程で作成する。

## 3.5 記述例
```markdown
| Term | Definition | Related Requirements |
|------|------------|----------------------|
| 顧客 | 営業部門が管理する取引先企業・個人 | STK-001, STK-005 |
| 重複チェック | 顧客名・電話番号・メールアドレスの一致判定 | STK-001 |
| 管理者 | システム設定・ユーザー管理権限を持つシステム部門担当者 | STK-003 |
| レポート | 売上予測・顧客分析などの集計結果を可視化したドキュメント | STK-002 |
| 迅速 | 3秒以内（要定量化） | STK-001, STK-002 |
```

## 3.6 注意点
- **曖昧語は "具体化前の状態" で書いてよい**
  - 例: "迅速" → "3秒以内（要定量化）"
- **Related Requirements に STK-xxx を付ける**
  - 要求とのトレーサビリティを保証
- **定義を勝手に補完しない**
  - 必ず根拠を要求側に求める。不明な場合は Open Questions に記載

---

# 4. 【テンプレート 3. Functional Requirements】作成プロセス

## 4.1 テンプレート構造
```markdown
## 3. Functional Requirements（機能要件）

### 3.1 構成方針
- 要求（STK-xxx）から導出される機能要件を
  **REQ-F-XXX（機能ID）** 形式で記述すること。
- 各要件は **受入条件** を必ず持つ。
- 必ず **関連するステークホルダー要求（STK-xxx）** と紐付ける。

### 3.2 要件一覧

#### REQ-F-xxx: <機能要件タイトル>
**概要**
要求から導出した機能の要点（1 行）

**詳細**
- システムが実行すべき動作
- 入力 / 出力
- 例外処理（可能な範囲）
- 条件分岐に必要な情報

**受入条件（明確な検証可能条件）**
- 条件1
- 条件2

**関連要求**
- STK-xxx, STK-yyy

**備考（必要なら）**
（仕様で補足が必要な点）
```

## 4.2 入力
- `4. Stakeholder Needs` の **STK-xxx**（要求）
- Definitions（定義）
- Constraints（要求側）

---

## 4.3 要求からの導出ルール（最重要）

**1つの STK-xxx が、複数の REQ-F-xxx に分割されるのが通常。**

### 導出の基準
- 要求の「必要性（Why）」に対して
- それを満たす「システムの動作（What）」を定義する

### 導出プロセス
1. **要求を読む**
   - STK-001: "顧客情報の重複を防止したい"
2. **要求の背景を理解**
   - 背景: Excelで管理しており、同じ顧客が複数回登録される
   - 懸念: 重複により二重請求や営業活動の重複が発生
3. **システムの動作に分解**
   - REQ-F-001: 顧客登録機能
   - REQ-F-002: 重複チェック機能
   - REQ-F-003: 重複候補表示機能
   - REQ-F-004: 重複警告機能

### 導出例
**要求**: STK-002: "レポートを迅速に作成したい"

**分解後の要件**:
- REQ-F-005: レポート生成機能
- REQ-F-006: レポート入力フォーム
- REQ-F-007: レポート保存と履歴管理
- REQ-F-008: レポート生成進捗表示機能

**要求は抽象でも、要件は具体動作として分解する。**

---

## 4.4 REQ-F 要件の書き方

### Step 1: タイトル（動詞 + 名詞）
**良い例**:
- 「顧客情報登録機能」
- 「重複チェック機能」
- 「レポート生成機能」
- 「SAP API からのデータ取得機能」

**悪い例**:
- 「顧客管理」（抽象的すぎる）
- 「処理」（何の処理か不明）

### Step 2: 概要
要求の "Why" を踏まえた、機能の本質を1行でまとめる。

**例**:
```markdown
**概要**
顧客情報の登録時に重複をチェックし、誤った顧客データの登録を防ぐ。
```

### Step 3: 詳細
次の4項目は必須：

1. **システムが実行すべき動作**
   - "システムは〇〇を実行する"
2. **入力/出力**
   - 入力: 顧客名、電話番号、メールアドレス
   - 出力: 重複チェック結果、重複候補リスト
3. **エラー・例外**
   - 入力チェックエラー、外部API接続エラー
4. **条件分岐に必要な情報**
   - 重複判定条件、警告表示条件

### Step 4: 受入条件
**必ず定量化・検証可能にする。**

**悪例**:
- 正常に動作すること（検証不可能）
- 迅速に処理できる（曖昧）
- ユーザーフレンドリーな画面（主観的）

**良例**:
- レポート生成が 5 秒以内に完了する
- 入力チェックエラーは画面上部に赤文字で表示される
- 重複チェックは登録ボタン押下から 3 秒以内に完了する
- 重複候補が 3 件以上の場合、上位 3 件のみ表示される

### Step 5: 関連要求
- 必ず STK-xxx を書く
- 1つの機能要件に複数の要求が紐づいてもよい

### 記述例（完全版）
```markdown
#### REQ-F-002: 顧客重複チェック機能
**概要**
顧客情報の登録時に既存データとの重複をチェックし、誤った顧客データの登録を防ぐ。

**詳細**
- **システムが実行すべき動作**:
  - 顧客登録ボタン押下時に、顧客名・電話番号・メールアドレスのいずれかが既存データと一致するかをチェックする
  - 一致する場合、重複候補リストを表示し、警告メッセージを表示する
- **入力**:
  - 顧客名（必須）
  - 電話番号（任意）
  - メールアドレス（任意）
- **出力**:
  - 重複チェック結果（重複あり/なし）
  - 重複候補リスト（顧客名、電話番号、メールアドレス、登録日）
- **例外処理**:
  - DB接続エラー時: エラーメッセージ表示、登録処理を中断
  - 重複チェックタイムアウト時: 警告メッセージ表示、ユーザーに継続確認
- **条件分岐**:
  - 顧客名が完全一致: 重複と判定
  - 電話番号が完全一致: 重複と判定
  - メールアドレスが完全一致: 重複と判定

**受入条件（明確な検証可能条件）**
- 顧客名・電話番号・メールアドレスのいずれかが一致する場合、警告が表示される
- 重複チェックは登録ボタン押下から 3 秒以内に完了する
- 重複候補が複数ある場合、登録日が新しい順に上位 3 件まで表示される
- 重複候補リストには顧客名・電話番号・メールアドレス・登録日が含まれる
- ユーザーは重複を確認した上で、登録を継続するか中断するかを選択できる

**関連要求**
- STK-001: 顧客情報の重複を防止したい

**備考**
- 重複判定ロジックは将来的に機械学習による類似度判定に拡張可能とする
```

---

## 4.5 規模管理ルール

### 単一責任の原則
- **1 REQ-F は 1 行為（単一責任）**
- 「まとめすぎ」を防ぐため、2段階分解を推奨：

```
STK-xxx（要求）
  ↓
要求クラスター（意味のまとまり）
  ↓
REQ-F（分割された機能要件）
```

### 分割の基準
以下の場合は分割を検討：
- 入力/出力が異なる
- 実行タイミングが異なる
- 責務が異なる（登録 vs 検索）
- テストケースが大きく異なる

### 分割例
**NG: まとめすぎ**
```markdown
REQ-F-001: 顧客管理機能
- 顧客の登録・検索・更新・削除を行う
```

**OK: 適切に分割**
```markdown
REQ-F-001: 顧客登録機能
REQ-F-002: 顧客検索機能
REQ-F-003: 顧客更新機能
REQ-F-004: 顧客削除機能
```

---

# 5. 【テンプレート 4. Non-Functional Requirements】作成プロセス

## 5.1 テンプレート構造
```markdown
## 4. Non-Functional Requirements（非機能要件）

非機能要件は **REQ-NF-XXX** の形式で記述する。

### 4.1 パフォーマンス（例）
#### REQ-NF-001: <タイトル>
- 詳細
- 数値基準（曖昧な場合は提案を行う）

### 4.2 セキュリティ
（同形式）

### 4.3 保守性
（同形式）

### 4.4 運用性
（同形式）

### 4.5 可用性
（同形式）

※ 非機能要件カテゴリは必要に応じて追加してよいが、
  **REQ-NF の ID体系は必ず統一すること。**
```

## 5.2 入力
- 要求フェーズで拾っていた "抽象的な期待"
- Constraints（技術・運用・外部連携）
- Open Questions の中の技術的背景

## 5.3 NFR の分類
ISO/IEC 25010 に沿って分類する。

| カテゴリ | 例 | 記述例 |
|----------|-----|--------|
| パフォーマンス | 応答時間、スループット | レポート生成は 5 秒以内 |
| セキュリティ | 認証、認可、暗号化 | 個人情報は AES-256 で暗号化 |
| 保守性 | 拡張性、変更容易性 | モジュール追加時の影響範囲を局所化 |
| 可用性 | 稼働率、フェイルオーバー | システム稼働率 99.9% 以上 |
| 運用性 | ログ、監視、リカバリ | 全操作ログを 1 年間保存 |
| 信頼性 | データ完全性、エラーレート | データ整合性チェックを毎日実行 |

## 5.4 書き方
REQ-NF-XXX として記述する。

### 記述例
```markdown
#### REQ-NF-001: レポート生成の応答時間
- **詳細**: レポート生成処理は、データ件数 10,000 件以下の場合、5 秒以内に完了すること
- **数値基準**: 応答時間 5 秒以内（95パーセンタイル）

#### REQ-NF-002: 個人情報の暗号化
- **詳細**: 顧客の個人情報（氏名、電話番号、メールアドレス）は DB 保存時に暗号化すること
- **数値基準**: AES-256 暗号化方式を使用

#### REQ-NF-003: 障害発生時の自動復旧
- **詳細**: Web アプリケーションは異常停止時に自動再起動すること
- **数値基準**: 復旧までの時間は 60 秒以内

#### REQ-NF-004: システム稼働率
- **詳細**: システムは平日 9:00-18:00 の営業時間中、99.9% 以上の稼働率を維持すること
- **数値基準**: 稼働率 99.9% 以上（月次）

#### REQ-NF-005: 操作ログの保存
- **詳細**: 全ユーザーの操作ログ（登録・更新・削除）を記録し、1 年間保存すること
- **数値基準**: ログ保存期間 1 年間、削除操作は記録必須
```

## 5.5 定量化のルール
定量化できない場合は **候補値を提示してステークホルダーに確認する**。

### 定量化の例
| 曖昧な表現 | 定量化した表現 |
|-----------|---------------|
| 迅速に処理 | 5 秒以内に完了 |
| 高い可用性 | 稼働率 99.9% 以上 |
| セキュアに保存 | AES-256 暗号化 |
| 長期間保存 | 1 年間保存 |
| 大量データ対応 | 10 万件以上のデータを処理可能 |

### 不明な場合の対応
```markdown
#### REQ-NF-006: 同時アクセス数
- **詳細**: システムは営業担当者の同時アクセスに対応すること
- **数値基準**: 情報不足、要確認（営業担当者数は何名か？）
```

---

# 6. 【テンプレート 5. Constraints】作成プロセス

## 6.1 テンプレート構造
```markdown
## 5. Constraints（制約）
01_stakeholder-needs.md の Constraints を以下に継承し、不足があれば補完する。

- <制約1>
- <制約2>

曖昧なものがあれば **"情報不足（理由）"** と明記する。
```

## 6.2 入力
- `01_stakeholder-needs.md` の Constraints
- 要件作成中に発見した追加制約

## 6.3 書くべき内容
次のようなもの：

| 制約カテゴリ | 例 |
|-------------|-----|
| プラットフォーム強制 | Windows 10 以降、Python 3.10 以降 |
| API 仕様の固定 | SAP API v2.0 に準拠 |
| 運用時間の制限 | 営業時間内のみ稼働（平日 9:00-18:00） |
| データフォーマット固定 | CSV形式、UTF-8 エンコード |
| 外部システムに依存する仕様 | SAP の可用性に依存 |
| セキュリティ制約 | 個人情報保護法に準拠 |
| 組織・運用制約 | 保守担当: システム部 山田氏 |

## 6.4 継承と補完のルール
1. **要求側の Constraints をそのまま継承**
2. **要件作成中に発見した制約を追加**
3. **曖昧なものは「情報不足」と明記**

## 6.5 記述例
```markdown
## 5. Constraints（制約）

### 技術的制約
- 既存の基幹システム（SAP）との連携が必須。SAP API v2.0 の仕様に準拠する必要がある
- 開発言語: Python 3.10 以降（既存システムとの整合性）
- データベース: SQLite 3.x（単一ユーザー環境）
- OS: Windows 10 以降

### データ制約
- 顧客データのフォーマットは SAP の標準フォーマットに準拠
- CSVファイルは UTF-8 エンコード、カンマ区切り
- 個人情報は AES-256 で暗号化必須

### 運用制約
- 運用時間: 平日 9:00-18:00（営業部門の稼働時間）
- 保守担当: システム部 山田氏
- バックアップ: 毎日 19:00 に自動実行

### 外部依存
- SAP API の可用性に依存
- 情報不足、要確認（SAP API のダウンタイム頻度、SLA）

### 規制・セキュリティ制約
- 個人情報保護法に準拠
- アクセスログの保存期間: 1年
- 営業部門以外はデータ参照のみ（更新不可）

### 組織制約
- 営業部門の承認なしに仕様変更不可
- 情報不足、要確認（システム予算、リリース期限）
```

## 6.6 曖昧なものの扱い
必ず「情報不足（理由）」と書く。

**例**:
```markdown
- レポート生成サーバーは既存環境を流用する想定（情報不足: 仕様不明、スペック確認必要）
- データバックアップ方針（情報不足: バックアップ頻度・保存期間が未定）
```

---

# 7. 【テンプレート 6. Open Questions】作成プロセス

## 7.1 テンプレート構造
```markdown
## 6. Open Questions（要確認事項）
要求から要件化できなかった曖昧点や不足情報は
必ずここにまとめて列挙する。

| 質問 | 理由 / 影響範囲 | 誰に確認すべきか |
|------|----------------|-------------------|
| <例> この機能は管理者だけか？ | 認可要件に影響 | PO |

要件定義フェーズを進める前に解消すべき点をクリアにする。
```

## 7.2 入力
- 機能要件として定義しきれなかった部分
- 非機能要件として曖昧な部分
- 用語定義が不完全な部分

## 7.3 書き方
```markdown
| 質問 | 理由 / 影響範囲 | 誰に確認すべきか |
|------|----------------|-------------------|
```

## 7.4 記述例
```markdown
## 6. Open Questions（要確認事項）

| 質問 | 理由 / 影響範囲 | 誰に確認すべきか |
|------|----------------|-------------------|
| 管理者権限でステータス変更できる範囲は？ | 認可要件に影響 | STKH-003（システム管理者） |
| 営業担当者の同時アクセス数は何名か？ | 性能設計・負荷試験に影響 | STKH-002（営業マネージャー） |
| SAP API のダウンタイム頻度・SLAは？ | 可用性設計に影響 | STKH-003（システム管理者） |
| データバックアップの頻度・保存期間は？ | 運用設計に影響 | STKH-003（システム管理者） |
| インターネット接続環境はあるか？ | アーキテクチャ選定に影響 | STKH-003（システム管理者） |
| 顧客データの更新頻度は？ | データ同期設計に影響 | STKH-001（営業担当者） |
| レポート生成サーバーのスペックは？ | 性能設計に影響 | STKH-003（システム管理者） |
| システム予算・リリース期限は？ | スコープ調整に影響 | PO（プロダクトオーナー） |
```

## 7.5 注意点
- **不明点は必ず残す**
  - 想像で埋めてはならない
- **影響範囲を明記**
  - どの工程に影響するかを明確にする
- **確認先を明記**
  - 誰に確認すべきかを明確にする（STKH-xxx、PO など）
- **ここが弱いと要件定義が形骸化する**
  - Open Questions が空欄 = 要件定義が不完全

---

# 8. 【テンプレート 7. Appendix】作成プロセス

## 8.1 テンプレート構造
```markdown
## 7. Appendix
- 要求 → 要件のマッピング表（Claude が自動生成してよい）
- メモ・補足
```

## 8.2 内容
- **要求（STK-xxx）と要件（REQ-F / REQ-NF）を1対多で紐づける**
- **"要求を満たせていない要件がないか" を確認する**
- **"要件に根拠のないものがないか" を確認する**

## 8.3 マッピング表の目的
- **要求と要件のトレーサビリティを保証**
- **テスト設計時に網羅性を担保**
- **要件の根拠を明確にする**

## 8.4 記述例
```markdown
## 7. Appendix

### 要求 → 要件マッピング表

| 要求 ID | 要求タイトル | 関連要件 |
|---------|-------------|----------|
| STK-001 | 顧客情報の重複を防止したい | REQ-F-001, REQ-F-002, REQ-F-003, REQ-F-004, REQ-NF-001 |
| STK-002 | レポートを迅速に作成したい | REQ-F-005, REQ-F-006, REQ-F-007, REQ-F-008, REQ-NF-001, REQ-NF-002 |
| STK-003 | データバックアップを自動化したい | REQ-F-009, REQ-NF-003, REQ-NF-005 |
| STK-004 | SAP との連携を確保したい | REQ-F-010, REQ-F-011, REQ-NF-004 |

### 要件 → 要求マッピング表

| 要件 ID | 要件タイトル | 関連要求 |
|---------|-------------|----------|
| REQ-F-001 | 顧客登録機能 | STK-001 |
| REQ-F-002 | 顧客重複チェック機能 | STK-001 |
| REQ-F-003 | 重複候補表示機能 | STK-001 |
| REQ-F-004 | 重複警告機能 | STK-001 |
| REQ-F-005 | レポート生成機能 | STK-002 |
| REQ-F-006 | レポート入力フォーム | STK-002 |
| REQ-F-007 | レポート保存と履歴管理 | STK-002 |
| REQ-F-008 | レポート生成進捗表示機能 | STK-002 |
| REQ-F-009 | データバックアップ機能 | STK-003 |
| REQ-F-010 | SAP API データ取得機能 | STK-004 |
| REQ-F-011 | SAP API データ送信機能 | STK-004 |
| REQ-NF-001 | レポート生成の応答時間 | STK-001, STK-002 |
| REQ-NF-002 | 個人情報の暗号化 | STK-002 |
| REQ-NF-003 | 障害発生時の自動復旧 | STK-003 |
| REQ-NF-004 | システム稼働率 | STK-004 |
| REQ-NF-005 | 操作ログの保存 | STK-003 |

### トレーサビリティチェック
- [ ] すべての要求（STK-xxx）が少なくとも 1 つの要件（REQ-F / REQ-NF）に紐づいている
- [ ] すべての要件（REQ-F / REQ-NF）が少なくとも 1 つの要求（STK-xxx）に紐づいている
- [ ] 要求に紐づかない要件がある場合、理由を明記（例: システム制約による追加要件）
```

## 8.5 補足情報
必要に応じて以下を追加：
- **業務フロー図**
- **データフロー図**
- **システム境界図**
- **用語定義の詳細**

---

# 9. レビュー手順

## 9.1 ステークホルダー向けレビュー
- **要求に対する要件の解釈が正しいか**
  - 要求の意図を正しく理解しているか
  - 要求を満たす要件になっているか
- **不足・過剰がないか**
  - 要求に対して不足している要件はないか
  - 要求にない要件が勝手に追加されていないか
- **業務フローと矛盾していないか**
  - 業務の流れと要件の動作が一致しているか

## 9.2 技術系レビュー（設計観点）
- **要件が実装可能か**
  - 技術的に実現可能な要件か
  - 制約と矛盾していないか
- **非機能要件が現実的か**
  - 性能要件が達成可能か
  - 運用要件が現実的か
- **Constraints と矛盾していないか**
  - 技術制約を満たしているか
  - プラットフォーム制約に準拠しているか

## 9.3 トレーサビリティレビュー
- **要求と要件のマッピングが完全か**
  - すべての要求が要件に紐づいているか
  - すべての要件が要求に紐づいているか
- **Open Questions が整理されているか**
  - 不明点が漏れなく記載されているか
  - 確認先・影響範囲が明記されているか

---

# 10. 最終チェックリスト（必須）

- [ ] **テンプレート構造が厳守されているか**（見出し構造の変更・削除・追加がないか）
- [ ] 要求と要件が1対多で正しく紐づいているか
- [ ] 要件が「具体的な動作」で書かれているか（抽象的でないか）
- [ ] 受入条件が定量化されているか（検証可能か）
- [ ] 非機能要件が抜けていないか（パフォーマンス、セキュリティ、保守性、運用性、可用性）
- [ ] Constraints が最新になっているか（要求側と整合しているか）
- [ ] Open Questions が漏れていないか（不明点を想像で埋めていないか）
- [ ] Definitions に曖昧語が残っていないか（定量化が必要な用語）
- [ ] 要求 → 要件マッピング表が作成されているか（Appendix）
- [ ] すべての REQ-F / REQ-NF に関連要求（STK-xxx）が記載されているか

---

# 付録：作業の入力
```
docs/requirements/01_stakeholder-needs.md
```

---

# まとめ（重要ポイント）

- 要件定義は **要求の"解釈"ではなく、"論理的な分解"**
- **1つの要求（STK-xxx）が複数の要件（REQ-F / REQ-NF）に分割されるのが通常**
- 曖昧な部分はすべて Definitions と Open Questions に送る
- **受入条件は必ず定量化・検証可能にする**（抽象語・主観的表現は禁止）
- 特に非機能要件（保守性・性能・可用性）は要求フェーズで漏れやすいため注意
- **要求と要件のトレーサビリティを保証する**（Appendix のマッピング表）
- **不明点は想像で埋めず、Open Questions に記載する**
- **Constraints は要求側と整合を取り、追加制約も記載する**
