# 01. Stakeholder Needs

## 1. Purpose
複数プロジェクトの工数消化状況を日次で可視化し、チームリーダーが進捗およびメンバー稼働状況を判断可能にする。

## 2. Scope
### 2.1 In Scope
- 複数プロジェクトの契約情報（業務開始日・終了日・契約工数）の管理
- 外部サービスから取得した工数実績データ（CSV）の取り込み
- プロジェクトごとの工数消化状況のバーンダウンチャート形式での可視化
- 個人ごとの稼働状況の可視化
- 営業日カレンダー（お盆・正月などの長期休暇を考慮）の管理
- 工数余剰時の要因分析（他業務従事・長期休暇の可能性提示）

### 2.2 Out of Scope
- プロジェクト契約の新規作成・変更申請機能
- 工数実績データの直接入力・編集機能
- 予算管理・請求機能
- 個人の勤怠管理詳細
- Web サーバー、マルチユーザー同時接続機能（スタンドアロン・デスクトップアプリとして動作）

## 3. Stakeholder List
| ID | Stakeholder | 役割 / 関心事 |
|----|-------------|----------------|
| STKH-001 | チームリーダー | 複数プロジェクトの進捗管理、工数消化状況の判断、メンバー稼働状況の把握 |
| STKH-002 | チームメンバー | 自身および他メンバーの工数実績データの可視化情報の閲覧 |
| STKH-003 | 経営層 / プロジェクトマネージャー | プロジェクトおよびメンバー稼働状況のレポート確認（グラフと数値の両方） |

## 4. Stakeholder Needs

### 4.1 チームリーダー

#### STK-001: 複数プロジェクトの工数消化状況の一覧把握
**概要**
大量のプロジェクト群の工数消化状況を一元的に可視化し、問題の有無を迅速に判断できること。

**詳細**
- ユースケース: 毎週の進捗会議前に、全プロジェクトの状態を確認し、問題プロジェクトを特定する
- 背景: 複数プロジェクトを同時並行で管理しており、個別に Excel や CSV を開いて確認するのは非効率
- 懸念・不満点: 現状では各プロジェクトのデータを手作業で集計・分析する必要があり、見落としが発生しやすい
- 必要とされる理由: 問題の早期発見とタイムリーな対策実施のため

**受入条件**
- プロジェクト一覧画面から各プロジェクトの消化率が視覚的に判断できること
- 問題のあるプロジェクト（消化遅延・余剰）が識別可能であること

**関連ステークホルダー**
- STKH-001

**優先度**
MUST

#### STK-002: プロジェクト契約情報の管理
**概要**
プロジェクトの業務開始日・終了日・契約工数を管理し、基準データとして使用できること。

**詳細**
- ユースケース: 新規プロジェクト開始時に契約情報を登録し、進捗管理の基準とする
- 背景: 契約時に業務期間と使用可能工数が定まっている
- 懸念・不満点: 別ツールで編集した CSV ファイルを再取得する運用となるため、編集機能は不要
- 必要とされる理由: 工数消化の基準値として必須

**受入条件**
- プロジェクトごとに業務開始日・終了日・契約工数が管理されていること
- CSV ファイル（フォーマット: `プロジェクト,開始日,終了日,工数`）から一括インポート可能であること

**関連ステークホルダー**
- STKH-001

**優先度**
MUST

#### STK-003: 外部サービスからの工数実績データ取り込み
**概要**
別サービスから出力された工数実績 CSV ファイルを取り込み、プロジェクトごとに集計できること。

**詳細**
- ユースケース: 日次で外部サービスから工数実績をエクスポートし、本ツールに取り込む
- 背景: 誰がいつ、どのプロジェクトにどれだけ工数を使用したかのデータが別システムで管理されている
- 工数単位: 時間（Hour）、小数点以下 2 桁まで
- CSV フォーマット: `日付,工数(h),名前,プロジェクト,備考`
- 必要とされる理由: 実績データなしでは進捗判断が不可能

**受入条件**
- CSV ファイルをアップロードまたは指定パスから読み込み可能であること
- プロジェクト名でマッピングし、消化工数を集計できること
- 工数を時間（Hour）単位、小数点以下 2 桁で扱えること
- エラーデータ（不正フォーマット、未登録プロジェクトなど）を検出・通知できること

**関連ステークホルダー**
- STKH-001

**優先度**
MUST

#### STK-004: バーンダウンチャート形式での工数消化可視化
**概要**
終了日までの残日数と工数消化状況をバーンダウンチャートのように表現し、視覚的に進捗を判断できること。

**詳細**
- ユースケース: プロジェクト詳細画面で、計画線と実績線を比較し、進捗が順調か判断する
- 背景: 工数の減り具合を時系列で見ることで、将来の問題を予測したい
- 懸念・不満点: 残日数がカレンダー上の営業日と一致しないため、単純な日数計算では不正確
- 必要とされる理由: 視覚的に進捗の健全性を判断するため

**受入条件**
- 横軸: 営業日ベースの残日数、縦軸: 残工数
- 理想線（契約工数を期間で均等消化した線）と実績線を表示
- 現在日の位置が明確にわかること

**関連ステークホルダー**
- STKH-001

**優先度**
MUST

#### STK-005: 営業日カレンダーの考慮
**概要**
お盆・正月などの長期休暇を考慮し、残日数を営業日ベースで計算できること。

**詳細**
- ユースケース: プロジェクト期間に長期休暇が含まれる場合、実働日数を正確に算出する
- 背景: カレンダー上の日数と営業日数は一致せず、工数消化計画が狂う
- 休日マスタ形式: JSON 形式で提供（休日 = 0、業務日 = 1）
- フォーマット例: `{"2025-01": {"01": 0, "02": 1, ...}}`
- 必要とされる理由: 正確な進捗判断のため

**受入条件**
- 休日マスタを JSON 形式で取り込み可能であること
- 残日数計算時に休日（0）を除外すること

**関連ステークホルダー**
- STKH-001

**優先度**
SHOULD

#### STK-006: 個人ごとの稼働状況可視化
**概要**
メンバー単位で工数使用状況を表示し、他業務従事や長期休暇の可能性を判断できること。

**詳細**
- ユースケース: プロジェクトで工数余剰が発生している場合、メンバー別の稼働を確認し、要因を特定する
- 背景: 想定以上に工数が残る場合、チームメンバーが他業務をしているか、長期休暇に入っている可能性が高い
- 利用権限: 全チームメンバーがツールを使用可能であり、稼働状況も全員に可視化される
- 必要とされる理由: 工数余剰の要因分析と対策立案のため

**受入条件**
- メンバー単位で、期間内の工数使用量を表示できること
- 複数プロジェクトへの配分状況が確認できること
- 未稼働期間が視覚的にわかること

**関連ステークホルダー**
- STKH-001

**優先度**
SHOULD

#### STK-007: 工数余剰要因の分析支援
**概要**
工数が余剰している場合、他業務従事や長期休暇などの要因を提示できること。

**詳細**
- ユースケース: 工数余剰プロジェクトを発見した際、メンバーの稼働状況とカレンダーをもとに要因を推測する
- 背景: 単に「余っている」だけでは対策を立てられない
- 懸念・不満点: 情報不足、要確認（要因の自動推定ロジック、アラート機能など）
- 必要とされる理由: 迅速な対策立案のため

**受入条件**
- メンバー稼働状況と休日カレンダーを組み合わせて要因候補を提示できること

**関連ステークホルダー**
- STKH-001

**優先度**
COULD

## 5. Constraints
- **技術的制約**
  - データソースは CSV（工数実績、プロジェクト契約）および JSON（休日マスタ）のみ
  - Python (uv) 環境で動作すること
  - デスクトップアプリケーションとして動作（Web サーバー不要）

- **運用制約**
  - データ更新頻度: 日次
  - 配布形態: 各ローカル PC で単独実行（マルチユーザー同時接続は不要）
  - 入力データの編集は別ツールで行い、編集後のファイルを再取得する

- **外部依存**
  - 外部サービスから工数実績 CSV を日次でエクスポート可能であること
  - 休日マスタを JSON 形式で提供可能であること

## 6. Assumptions
- プロジェクト契約情報は CSV 形式（フォーマット: `プロジェクト,開始日,終了日,工数`）で提供される
- 工数実績データは CSV 形式（フォーマット: `日付,工数(h),名前,プロジェクト,備考`）で提供される
- 工数単位は時間（Hour）、小数点以下 2 桁
- 1 プロジェクトに複数メンバーがアサインされる
- メンバーは複数プロジェクトを兼務可能
- 休日マスタは JSON 形式で提供され、休日 = 0、業務日 = 1 で表現される
- ツールは各ローカル PC で個別実行され、サーバーやマルチユーザー機能は不要
- 経営層・PM もツールを使用し、グラフと数値の両方でレポートを確認する

## 7. Open Questions
None

## 8. Appendix

### 元ヒアリングメモ要約
```
1. 大量のプロジェクトの進捗管理を工数面からチームリーダーが判断したい
2. 契約時に業務開始日・終了日・契約工数が定まる
3. 複数プロジェクトのデータファイルが CSV で存在
4. 別サービスから、誰がいつ、どのプロジェクトにどれだけ工数を使用したかの CSV を取得可能
5. 終了日までの残日数から減り具合をバーンダウンチャートのように表現
6. 工数余剰時は他業務従事・長期休暇の可能性が高い
7. 個人ごとの状態も可視化
8. 長期休暇があり、残日数とカレンダー平日数は不一致
```

### 補足
- 本ドキュメントは初回ヒアリングメモをもとに作成
- すべての Open Questions が解消され、要求定義は凍結状態（Frozen）

### 解消済み Open Questions の詳細
- **Q1**: 工数実績 CSV フォーマット → `日付,工数(h),名前,プロジェクト,備考`
- **Q2**: プロジェクト契約 CSV フォーマット → `プロジェクト,開始日,終了日,工数`
- **Q3**: 休日マスタ形式 → JSON（休日 = 0、業務日 = 1）
- **Q4**: 工数単位 → 時間（Hour）、小数点以下 2 桁
- **Q5**: チームメンバー権限 → 全員使用可能
- **Q6**: 経営層・PM の利用 → 利用あり、レポートはグラフと数値の両方
- **Q7**: データ更新頻度 → 日次
- **Q8**: ユーザー数・同時接続 → 各ローカル PC で単独実行（マルチユーザー不要）
- **Q9**: UI 形態 → デスクトップアプリ
- **Q10**: 契約情報更新方法 → 別ツールで編集後、CSV 再取得
